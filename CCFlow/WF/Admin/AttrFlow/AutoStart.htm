<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta charset="UTF-8" />
    <title>自動開始</title>
    <link href="../../Scripts/easyUI145/themes/color.css" rel="stylesheet" />
    <link href="../../Scripts/easyUI145/themes/default/easyui.css" rel="stylesheet" type="text/css" />
    <script type="text/javascript" src="../../Scripts/bootstrap/js/jquery.min.js"></script>
    <script src="../../Scripts/QueryString.js" type="text/javascript"></script>
    <link href="../../../DataUser/Style/ccbpm.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" type="text/css" href="../../Scripts/easyUI145/themes/default/easyui.css" />
    <link rel="stylesheet" type="text/css" href="../../Scripts/easyUI145/themes/icon.css" />
    <script type="text/javascript" src="../../Scripts/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../../Scripts/easyUI145/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="../../Scripts/easyUI145/locale/easyui-lang-zh_CN.js"></script>
    <!-- 引用通用的js文件. -->
    <script type="text/javascript" src="../../Scripts/config.js"></script>
    <script type="text/javascript" src="../../Comm/Gener.js"></script>
    <script src="../Admin.js"></script>
    <script type="text/javascript" language="javascript">
        //页面启动函数.
        $(function () {

            $("#Msg").html("<img src=../../Img/loading.gif />&nbsp;読み込み中です。しばらくお待ちください......");

            //初始化groupID.
            var fk_flow = GetQueryString("FK_Flow");
            var flow = new Entity("BP.WF.Flow", fk_flow);

            //通用赋值控件.
            GenerFullAllCtrlsVal(flow);

            //设置选择按钮选中.
            if (flow.FlowRunWay == 1)
                document.getElementById("TB_SpecEmp").value = flow.RunObj;

            if (flow.FlowRunWay == 2)
                document.getElementById("TB_DataModel").value = flow.RunObj;

            $("#Msg").html("");
        });

        function Save() {

            $("#Msg").html("保存しています。しばらくお待ちください......");

            var fk_flow = GetQueryString("FK_Flow");
            var flow = new Entity("BP.WF.Flow", fk_flow);

            var val = $('input[name="RB_FlowRunWay"]:checked').val();

            flow.FlowRunWay = val;
            if (flow.FlowRunWay == "1") {
                flow.RunObj = $("#TB_SpecEmp").val();
            }

            if (flow.FlowRunWay == "2") {
                flow.RunObj = $("#TB_DataModel").val();
            }
            flow.Update();

            window.location.href = window.location.href;

        }
    </script>
    <style type="text/css">
        /*body.easyui-layout {
            top: 20px;
            left: 40px;
        }*/
        .panel-body {
            padding: 0px;
        }

        .tabs {
            border-width: 1px 0 1px 0;
        }

        .btn-default {
            border: 0px;
        }

        .cs-btn-group {
            width: auto !important;
            min-height: 34px;
            text-align: right;
            background-color: transparent;
        }

            .cs-btn-group .l-btn-icon {
                display: none;
            }

            .cs-btn-group .l-btn-text {
                margin: 0;
            }

        .layout-panel {
            position: absolute;
            right: 0;
            top: 0 !important;
            box-shadow: none;
        }

        .layout-panel-north {
            width: auto !important;
            left: auto !important;
            background-color: transparent;
        }

        .btn {
            padding: 0 10px;
            color: #fff !important;
            border-radius: 0px !important;
            border: 0;
            height: 24px;
            line-height: 24px;
            box-sizing: border-box;
        }

            .btn:hover {
                padding: 0 10px;
                border: 0;
            }

        .btn-light-green {
            background-color: #50b6ac !important;
        }

            .btn-light-green:hover {
                background-color: #50b6ac;
            }

        .btn-light-blue {
            background-color: #62cae3 !important;
        }

            .btn-light-blue:hover {
                background-color: #62cae3;
            }

        .btn-light-yellow {
            background-color: #f3ba20 !important;
        }

            .btn-light-yellow:hover {
                background-color: #f3ba20;
            }

        .btn-light-red {
            background-color: #f74f52 !important;
        }

            .btn-light-red:hover {
                background-color: #f74f52;
            }

        .btn-white {
            border: 1px solid #031f5d;
            background-color: #fff !important;
            ;
            color: #031f5d !important;
        }

            .btn-white:hover {
                border: 1px solid #031f5d;
            }

        .tabs-wrap .tabs, .tabs-panels, .tabs li a.tabs-inner, .tabs-panels table, td.FDesc, td.FContext, td {
            border: 0;
        }

        .tabs-wrap table {
            width: 100% !important;
        }

        .tabs-wrap .tabs {
            padding-left: 0;
            width: auto;
            border-bottom: 1px solid #0a2561;
        }

        .tabs li a.tabs-inner {
            padding: 0 16px;
            background: none;
            border-radius: 5px 5px 0 0;
        }

            .tabs li a.tabs-inner:hover {
                background: none;
                font-weight: bold;
            }

        .tabs li.tabs-selected a.tabs-inner {
            border: 1px solid #0a2561;
            border-bottom-color: #fff;
            background: #fff;
        }

        td {
            box-sizing: border-box;
        }

            td a {
                color: #15398b;
                font-size: 12px;
            }

                td a img {
                    vertical-align: -2px;
                }

            td.FContext {
                width: 30%;
            }

                td.FContext:nth-child(2) {
                    padding-right: 30px;
                }

                td.FContext > *:only-child {
                    width: 100% !important;
                    font-size: 13px;
                    color: #282828;
                    box-sizing: border-box;
                }

                td.FContext[colspan] {
                    padding-right: 0;
                }

        select[disabled], input[type=text]:disabled, .form-control, .form-control[disabled], .form-control[readonly], fieldset[disabled] {
            background-color: #fff;
            border: 1px solid #ccc !important;
            text-align: left !important;
            height: 32px;
            box-sizing: border-box;
        }

            select[disabled], input[type=text]:disabled, .form-control[disabled], .form-control[readonly], fieldset[disabled] {
                background-color: #f7f6f9;
            }

        td input[type="text"], td input[type="number"], td input[type="date"], td input[type="tel"] {
            height: 32px;
        }

        td input[type="checkbox"] {
            margin-right: 5px;
            width: 16px;
            height: 16px;
        }

        td label {
            font-size: 13px;
        }

        /*td.FDesc {
           padding-right: 10px;
            text-align: right;
            box-sizing: border-box;
        }*/
        /*td.FDesc:first-child {
            width: 81px!important;
        }
        td:nth-child(3)[class="FDesc"] {
            width: 130px!important;
        }*/
        .cs-form-import > .layout-panel-center {
            padding: 16px 0 0 16px;
        }

        .cs-form-import > .layout-panel-north {
            top: 6px !important;
            padding-right: 21px;
            border-radius: 0;
        }
    </style>
</head>
<body>
 <form id="cc">
     
     <div id="bar" class="cs-tr cs-bar">
         
         <input type="button" id="Btn_Save" runat="server" value="保存" onclick="Save()" />
     </div>

                <fieldset>
                    <legend id="help"></legend>
                    <ul>
                    <li> 定義：自動的にワークフローを起動し、一つのフローの開始ノードの記入と開始は、特定のルールの設定の下で自動的に開始するフローである。</li>
                    <li> 説明：通常モードでのフロー起動は手動での起動です。つまり、ユーザーは一つのスタートリストから、フローの名前をクリックして、このフローを起動します。しかし、時には、システムが自動的にこのフローを開始します。</li>

                        <li>アプリケーションシナリオ</li>
                        <li> 毎週定例会のフローは、ユーザが毎週定例会を起動することを希望しています。この起動は手動的なものではなく、システムに自動的に開始させるものです。</li>


                    </ul>
                </fieldset>

                <fieldset>
                    <legend>
                    <input id="RB_FlowRunWay_0" type="radio" name="RB_FlowRunWay" value="0"  /><label for="RB_FlowRunWay_0">手動起動(デフォルト)</label>
                    </legend>

                        <ul>
                        <li>
                     <font color="gray">説明：つまり、スタッフがフローの開始リストから、フローをクリックして、フローを開始するということです。</font>
                     </li>
                     </ul> 
                </fieldset>
                <fieldset>
                    <legend>
                        <input id="RB_FlowRunWay_1" type="radio" name="RB_FlowRunWay" value="1" /><label for="RB_FlowRunWay_1">指定された担当者が時間どおりに開始します</label>
                    </legend>
                    <br />
                    <a href="javascript:ShowHidden('emps')">操作者パラメータ設定</a>

                    <div id="emps" style=" display:none;color:Gray">
                        <ul>
                            <li>説明：指定された人員が指定する開始時点で自動的に起動するフローです。</li>
                            <li>マニュアルを開けてください：<a href="javascript:WinOpen('http://ccbpm.mydoc.io/?v=5404&t=17088')">取扱説明書</a></li>
                            <li>一人で起動するパラメータ形式：人員番号@時間点1@時間点2@時間点n</li>

                            <li>n個人起動のパラメータ形式：人員番号@時間点1@時間点2@時間点n,人員番号@時間点1@時間点2@時間点n,人員番号@時間点1@時間点2@時間点n</li>
                            <li>例： zhangshan@01:01@12:01は、張三を毎日の1時1分、12時1分にこのフローを開始させます。</li>
                            <li>例： zhangshan@-01 01:01は、張三に毎月1日の1時1分にこのフローを開始させます。</li>
                            <li>例： zhangshan@06-01 01:01は、張三に毎年の6月1日の1時1分にこのフローを開始させます。</li>
                            <li>ccのの日付書式は、yyyy-MM-dd HH:mmです、時間が設定された時点に合致すると、システムはフローをトリガし、複数の時点は@記号で区切られます。</li>
                        </ul>
                    </div>

                    <br />

                    <input type="text" style="width:95%" id="TB_SpecEmp" name="TB_SpecEmp" />
                </fieldset>

                <fieldset>
                    <legend>

                        <input id="RB_FlowRunWay_2" type="radio" name="RB_FlowRunWay" value="2" /><label for="RB_FlowRunWay_2">データセットを時間通りに起動します。</label>

                    </legend>
                    <br />

                    <a href="javascript:ShowHidden('sql')">SQLパラメータ設定ヘルプ:</a>
                    <div id="sql" style=" display:none;color:Gray">
                        <ul>
                            <li>SQL文を設定してください。この文はデータソースを返します。</li>
                            <li>システムは、データの各部分に対してフローを開始します。これは、データソースモデルに従ってフローを自動的に開始することです。</li>
                            <li>データソースの列名は、開始ノードフォームのフィールド名と一致すると自動的に値が割り当てられます。</li>
                            <li>このパラメータはccbpmの表現をサポートします。</li>
                            <li>マニュアルを開けてください：<a href="javascript:WinOpen('http://ccbpm.mydoc.io/?v=5404&t=17088')">取扱説明書</a></li>
                        </ul>
                    </div>
                    <br />

                    <input type=text style="width:95%" id="TB_DataModel" name="TB_DataModel" />
                </fieldset>

                <fieldset>
                    <legend>

                    <input id="RB_FlowRunWay_3" type="radio" name="RB_FlowRunWay" value="3"  /><label for="RB_FlowRunWay_3">トリガースタート</label>
                    </legend>
                     
                        <ul style="color:Gray">
                        <li>説明：サードパーティソフトウェアは特定のテーブルWF_Taskにデータを書き込むと、データシステムを書き込むごとに自動的にフローが開始されます。</li>
                        <li>ccBPMこの表を読んでフローの開始を完了し、成功したらこの記録を既に開始された状態に設定します。</li>
                        <li>詳細は設定およびこの表の構成を参照してください。<a href="javascript:WinOpen('http://ccbpm.mydoc.io/?v=5404&t=17088')">取扱説明書</a></li>
                        </ul>
                    <font color="gray">
                    </font>                 
                </fieldset>

                <!--<input type=button value="保存" onclick="Save();" />-->
               <!--<asp:Button  class="easyui-linkbutton" ID="Btn_Save" runat="server" Text="保存" OnClick="BtnSave_Click" /> --> 
              
<!--
                <a style=" float:right" href="javascript: if ( confirm('本当に実行しますか？データ量が大きいデータはweb上で時間制限のため、実行に失敗します。') ) { WinOpen('/WF/Comm/RefMethod.htm?Index=7&EnsName=BP.WF.Template.FlowSheets&No=<%=FK_Flow %>&r=1208095548','_blank') }" tooltip="">スケジュールされたタスクを手動で有効にする</a>
-->


<div id="Msg"> </div>

</form>
</body>
</html>